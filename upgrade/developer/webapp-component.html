


<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Building a Webapp React Component &mdash; Mattermost 3.10 documentation</title>
  

  
  
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="../_static/theme.css" type="text/css" />
  

  
        <link rel="search" title="Search" href="../search.html"/>
    <link rel="top" title="Mattermost 3.10 documentation" href="../index.html"/>
        <link rel="up" title="Mattermost Developer’s Guide" href="../guides/developer.html"/>
        <link rel="next" title="Working with Redux" href="redux.html"/>
        <link rel="prev" title="Migrating the Webapp to Redux" href="webapp-to-redux.html"/>
	
		<!-- Google Analytics -->
		<script>
			(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
			(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
			m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
			})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

			ga('create', 'UA-67846571-2', 'auto');
			ga('send', 'pageview');
		</script>
		<!-- End Google Analytics -->
	


  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> Mattermost
          

          
          </a>

          
            
            
              <div class="version">
                3.10
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../overview/index.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../guides/user.html">User&#8217;s Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../guides/administrator.html">Administrator&#8217;s Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../guides/administrator.html#changelog">Changelog</a></li>
<li class="toctree-l1"><a class="reference internal" href="../guides/integration.html">Integration Guide</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../guides/developer.html">Developer&#8217;s Guide</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="../guides/developer.html#development-process">Development Process</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="contribution-guide.html">Code Contribution Guidelines</a></li>
<li class="toctree-l3"><a class="reference internal" href="dev-setup.html">Developer Machine Setup</a></li>
<li class="toctree-l3"><a class="reference internal" href="mobile-developer-setup.html">Mobile Developer Machine Setup</a></li>
<li class="toctree-l3"><a class="reference internal" href="api.html">Mattermost APIs</a></li>
<li class="toctree-l3"><a class="reference internal" href="api4.html">APIv4 Contribution Process</a></li>
<li class="toctree-l3"><a class="reference internal" href="developer-flow.html">Developer Flow</a></li>
<li class="toctree-l3"><a class="reference internal" href="webapp-to-redux.html">Migrating the Webapp to Redux</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Building a Webapp React Component</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#designing-your-component">Designing your Component</a></li>
<li class="toctree-l4"><a class="reference internal" href="#using-a-container">Using a Container</a></li>
<li class="toctree-l4"><a class="reference internal" href="#implementing-your-component">Implementing your Component</a></li>
<li class="toctree-l4"><a class="reference internal" href="#testing-your-component">Testing your Component</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="redux.html">Working with Redux</a></li>
<li class="toctree-l3"><a class="reference internal" href="running-mattermost.html">Running Mattermost</a></li>
<li class="toctree-l3"><a class="reference internal" href="style-guide.html">Mattermost Style Guide</a></li>
<li class="toctree-l3"><a class="reference internal" href="fx-guidelines.html">User Experience Guidelines</a></li>
<li class="toctree-l3"><a class="reference internal" href="localization.html">Localization</a></li>
<li class="toctree-l3"><a class="reference internal" href="core-developer-handbook.html">Core Developer Handbook</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../guides/developer.html#definitions">Definitions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guides/developer.html#unofficial-enhancements">Unofficial Enhancements</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../guides/core.html">Core Team Handbook</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../index.html">Mattermost</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          


  


<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Docs</a> &raquo;</li>
    
      <li><a href="../guides/developer.html">Mattermost Developer&#8217;s Guide</a> &raquo;</li>
    
    <li>Building a Webapp React Component</li>
    <li class="wy-breadcrumbs-aside">
      
        
          <a href="https://github.com/mattermost/docs/blob/master/source/developer/webapp-component.rst" class="fa fa-github"> Edit</a>
        
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="building-a-webapp-react-component">
<h1>Building a Webapp React Component<a class="headerlink" href="#building-a-webapp-react-component" title="Permalink to this headline">¶</a></h1>
<p>This page describes how to build a new React component in the webapp. All new components must meet the following requirements:</p>
<ol class="arabic simple">
<li>Be pure, meaning that all information required to render is passed in by props</li>
<li>Have no direct store interaction, use a container to wrap the component if needed</li>
<li>Have component tests</li>
<li>Be generic and re-usable when possible</li>
<li>Have documented props</li>
</ol>
<p>These requirements will be talked about in more detail in the following sections.</p>
<p>None of that make any sense to you, or new to React and Redux? Then check out these links:</p>
<ul class="simple">
<li><a class="reference external" href="https://facebook.github.io/react/tutorial/tutorial.html">https://facebook.github.io/react/tutorial/tutorial.html</a></li>
<li><a class="reference external" href="http://redux.js.org/">http://redux.js.org/</a></li>
</ul>
<p>The components for the webapp currently live in the <code class="docutils literal"><span class="pre">webapp/components/</span></code> directory in the <a class="reference external" href="https://github.com/mattermost/platform">platform repository</a>.</p>
<div class="section" id="designing-your-component">
<h2>Designing your Component<a class="headerlink" href="#designing-your-component" title="Permalink to this headline">¶</a></h2>
<p>The most important part of designing your component is deciding on what the props will be. Props are very much the API for your component, think of them as a contract between your component and the users of it.</p>
<p>Props are read-only variables that get passed down to your component either directly from a parent component or from an <cite>index.js</cite> container that pulls some data from the Redux store. More on that later, for now you can see all the different prop types here: <a class="reference external" href="https://facebook.github.io/react/docs/typechecking-with-proptypes.html#proptypes">https://facebook.github.io/react/docs/typechecking-with-proptypes.html#proptypes</a>.</p>
<p>Alright, so how do you decide what props your component should have? Think about your component is trying to display to the user. Any data you need to accomplish that should be part of the props.</p>
<p>As an example, let&#8217;s imagine we&#8217;re building an ItemList component with the purpose of displaying a list of items. The props for such a component might look like:</p>
<div class="highlight-javascript"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kr">static</span> <span class="nx">propTypes</span> <span class="o">=</span> <span class="p">{</span>
    <span class="cm">/**</span>
<span class="cm">     * Sets the title of the list</span>
<span class="cm">     */</span>
    <span class="nx">title</span><span class="o">:</span> <span class="nx">PropTypes</span><span class="p">.</span><span class="nx">string</span><span class="p">,</span>

    <span class="cm">/**</span>
<span class="cm">     * An array of item components to display</span>
<span class="cm">     */</span>
    <span class="nx">items</span><span class="o">:</span> <span class="nx">PropTypes</span><span class="p">.</span><span class="nx">arrayOf</span><span class="p">(</span><span class="nx">PropTypes</span><span class="p">.</span><span class="nx">object</span><span class="p">).</span><span class="nx">isRequired</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div>
<p>The <code class="docutils literal"><span class="pre">title</span></code> prop would control the string to display for the title, while <code class="docutils literal"><span class="pre">items</span></code> would be an array of the item objects we would like to display. Note that <code class="docutils literal"><span class="pre">items</span></code> has <code class="docutils literal"><span class="pre">.isRequired</span></code> appended while <code class="docutils literal"><span class="pre">title</span></code> does not. This means that to render our component must have the <code class="docutils literal"><span class="pre">items</span></code> prop set, while it can still render if we don&#8217;t set <code class="docutils literal"><span class="pre">title</span></code>. Use this to provide optional props.</p>
<p>Make sure you add brief but clear comments to each prop type as shown in the example.</p>
<p>Our ItemList component would live in a file named <code class="docutils literal"><span class="pre">item_list.js</span></code>.</p>
</div>
<div class="section" id="using-a-container">
<h2>Using a Container<a class="headerlink" href="#using-a-container" title="Permalink to this headline">¶</a></h2>
<p>The next question to ask yourself is if you&#8217;re going to need a container for your component. This is the <code class="docutils literal"><span class="pre">index.js</span></code> file mentioned above. If your component needs either of the following then you&#8217;ll need a container:</p>
<ol class="arabic simple">
<li>Needs some data injected into it&#8217;s props that the parent component doesn&#8217;t have access to</li>
<li>Needs to be able to perform some sort of action that affects the state of the store</li>
</ol>
<p>Continuing the ItemList example above, maybe our parent component doesn&#8217;t care about our list of items and doesn&#8217;t have access to them. Let&#8217;s also imagine that we want to let the user remove items from the list by clicking on them. This means our component now needs a container for both criteria above and our props will change slightly:</p>
<div class="highlight-javascript"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kr">static</span> <span class="nx">propTypes</span> <span class="o">=</span> <span class="p">{</span>
    <span class="cm">/**</span>
<span class="cm">     * Sets the title of the list</span>
<span class="cm">     */</span>
    <span class="nx">title</span><span class="o">:</span> <span class="nx">PropTypes</span><span class="p">.</span><span class="nx">string</span><span class="p">,</span>

    <span class="cm">/**</span>
<span class="cm">     * An array of item components to display</span>
<span class="cm">     */</span>
    <span class="nx">items</span><span class="o">:</span> <span class="nx">PropTypes</span><span class="p">.</span><span class="nx">arrayOf</span><span class="p">(</span><span class="nx">PropTypes</span><span class="p">.</span><span class="nx">object</span><span class="p">).</span><span class="nx">isRequired</span>

    <span class="nx">actions</span><span class="o">:</span> <span class="nx">PropTypes</span><span class="p">.</span><span class="nx">shape</span><span class="p">({</span>
        <span class="cm">/**</span>
<span class="cm">         * An action to remove an item from the list</span>
<span class="cm">         */</span>
        <span class="nx">removeItem</span><span class="o">:</span> <span class="nx">React</span><span class="p">.</span><span class="nx">PropTypes</span><span class="p">.</span><span class="nx">func</span><span class="p">.</span><span class="nx">isRequired</span>
    <span class="p">}).</span><span class="nx">isRequired</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div>
<p>The container will then need to import selectors and actions from Redux and the connect them to the component and the store.</p>
<div class="highlight-javascript"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kr">import</span> <span class="p">{</span><span class="nx">connect</span><span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;react-redux&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="p">{</span><span class="nx">bindActionCreators</span><span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;redux&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="p">{</span><span class="nx">removeItem</span><span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;mattermost-redux/actions/items&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="p">{</span><span class="nx">getItems</span><span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;mattermost-redux/selectors/entities/items&#39;</span><span class="p">;</span>

<span class="kr">import</span> <span class="nx">ItemList</span> <span class="nx">from</span> <span class="s1">&#39;./item_list.js&#39;</span><span class="p">;</span>

<span class="kd">function</span> <span class="nx">mapStateToProps</span><span class="p">(</span><span class="nx">state</span><span class="p">,</span> <span class="nx">ownProps</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">{</span>
        <span class="p">...</span><span class="nx">ownProps</span><span class="p">,</span>
        <span class="nx">items</span><span class="o">:</span> <span class="nx">getItems</span><span class="p">(</span><span class="nx">state</span><span class="p">)</span>
    <span class="p">};</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">mapDispatchToProps</span><span class="p">(</span><span class="nx">dispatch</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">{</span>
        <span class="nx">actions</span><span class="o">:</span> <span class="nx">bindActionCreators</span><span class="p">({</span>
            <span class="nx">removeItem</span>
        <span class="p">},</span> <span class="nx">dispatch</span><span class="p">)</span>
    <span class="p">};</span>
<span class="p">}</span>

<span class="kr">export</span> <span class="k">default</span> <span class="nx">connect</span><span class="p">(</span><span class="nx">mapStateToProps</span><span class="p">,</span> <span class="nx">mapDispatchToProps</span><span class="p">)(</span><span class="nx">ItemList</span><span class="p">);</span>
</pre></div>
</td></tr></table></div>
<p>If the selectors and/or actions you need don&#8217;t yet exist in Redux then you should go add those first by following the <a class="reference external" href="./redux.html">guide to adding actions and selectors</a>.</p>
<p>Your <code class="docutils literal"><span class="pre">index.js</span></code> and <code class="docutils literal"><span class="pre">item_list.js</span></code> files will live together in an <code class="docutils literal"><span class="pre">item_list/</span></code> directory.</p>
</div>
<div class="section" id="implementing-your-component">
<h2>Implementing your Component<a class="headerlink" href="#implementing-your-component" title="Permalink to this headline">¶</a></h2>
<p>With the props defined and, if necessary, the container built, you&#8217;re ready to implement your component. For the most part implementing a component for the webapp is no different than building any other React component. That said, we do have a few rules to abide by:</p>
<ol class="arabic simple">
<li>All components must extend <code class="docutils literal"><span class="pre">React.PureComponent</span></code></li>
<li>All data for rendering must come from props</li>
<li>Local rendering information that does not affect the store may be kept in state</li>
</ol>
<p>Our ItemList example might look something like this:</p>
<div class="highlight-javascript"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42</pre></div></td><td class="code"><div class="highlight"><pre><span></span>export default class ItemList extends React.PureComponent {
    static propTypes = {
        /**
         * Sets the title of the list
         */
        title: PropTypes.string,

        /**
         * An array of item components to display
         */
        items: PropTypes.arrayOf(PropTypes.object).isRequired

        actions: PropTypes.shape({
            /**
             * An action to remove an item from the list
             */
            removeItem: React.PropTypes.func.isRequired
        }).isRequired
    }

    render() {
        const items = [];

        this.props.items.forEach((item) =&gt; {
            items.push(
                &lt;Item
                    item={item}
                    onClick={this.props.actions.removeItem}
                /&gt;
            );
        });

        return (
            &lt;div className=&#39;backstage-header&#39;&gt;
                &lt;h1&gt;
                    {this.props.title}
                &lt;/h1&gt;
                {items}
            &lt;/div&gt;
        );
    }
}
</pre></div>
</td></tr></table></div>
</div>
<div class="section" id="testing-your-component">
<h2>Testing your Component<a class="headerlink" href="#testing-your-component" title="Permalink to this headline">¶</a></h2>
<p>The last required piece of building a webapp component is to test it. That can be done using the component testing framework described in this blog post:</p>
<p><a class="reference external" href="https://grundleborg.github.io/posts/react-component-testing-in-mattermost/">https://grundleborg.github.io/posts/react-component-testing-in-mattermost/</a></p>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="redux.html" class="btn btn-neutral float-right" title="Working with Redux" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="webapp-to-redux.html" class="btn btn-neutral" title="Migrating the Webapp to Redux" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2015, 2016, 2017 Mattermost.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  
 




<div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
        <span class="fa fa-cog">&nbsp;&nbsp;Options</span>&nbsp;
        <span class="fa fa-angle-up"></span>
    </span>
    <div class="rst-other-versions">
        <dl>
            <dt>Contribute</dt>
            <dd>
                <a href="https://github.com/mattermost/docs/issues">Report a Problem</a>
            </dd>
            
            <dd>
                <a href="https://github.com/mattermost/docs/blob/master/source/developer/webapp-component.rst"> Edit on GitHub</a>
            </dd>
            
        </dl>
    </div>
</div>


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'3.10',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>
      <script type="text/javascript" src="../_static/myscript.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
  
	<header>
	<div class="header__container">
		<div class="search__icon">
			<i class="fa fa-search"></i>
		</div>
		<a href="http://docs.mattermost.com/" class="header__logo">
			<img width="176" src="https://about.mattermost.com/wp-content/uploads/2017/03/headerlogo.svg">
		</a>
		<div class="links__icon">
			<i class="fa fa-bars"></i>
		</div>
		<ul class="header__links">
			<li><a href="https://about.mattermost.com/solutions/">Solutions</a></li>
			<li><a href="https://about.mattermost.com/features/">Features</a></li>
			<li><a class="active" href="http://docs.mattermost.com/">Documentation</a></li>
			<li><a href="https://about.mattermost.com/pricing/">Pricing</a></li>
			<li><a href="https://about.mattermost.com/contact/">Contact</a></li>
			<li><a href="https://www.mattermost.org/download/">Download</a></li>
		</ul>
		<div class="header__searchbar">
			<form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
                <input type="text" name="q" placeholder="Search by keyword" autofocus />
                <input type="hidden" name="check_keywords" value="yes" />
                <input type="hidden" name="area" value="default" />
            </form>
		</div>
	</div>
</header>
	<script type="text/javascript">
		/* Temporary fix for the search capability. Fix has been committed to the theme's master;
		   however, waiting a new release to the theme.  This fix should remain in place until that
		   time.  sphinx_rtd_theme is current v0.1.10a0. Commit for the fix in the 
		   theme can be found at: https://github.com/snide/sphinx_rtd_theme/commit/a5e0e304
		 */
        if(DOCUMENTATION_OPTIONS) {
			DOCUMENTATION_OPTIONS.SOURCELINK_SUFFIX = '.txt' 
        }
    </script>


</body>
</html>